<mat-card class="content-container">
  <!--    <div class="card-options">-->
  <!--      <div class="actions">-->
  <!--        <span class="lb">Download: </span>-->
  <!--        <button (click)="downloadResults()">Click</button>-->
  <!--     </div>-->

  <!--      <mat-paginator [length]="userlength"-->
  <!--                     [pageSize]="limit"-->
  <!--                     [pageSizeOptions]="[5, 10, 20, 50, 100]"-->
  <!--                     (page)="pageEvent($event)">-->
  <!--      </mat-paginator>-->
  <!--    </div>-->
  <div class="card">
    <div class="bonus-column">
      <div class="task-container header">
        <div class="task-result">
          <span class="title">Kurs-Bonus</span>
        </div>
      </div>
      <div class="bonus-container" *ngFor="let result of evaluationUserResults | async">
              <span class="category-result-backpane" matTooltipPosition="above"
                    matTooltip="{{result.user.surname}}, {{result.user.prename}}, {{result.bonusPoints}}">
                       <span class="category-bonus bonus" *ngIf="result.bonusPoints==0">{{ result.bonusPoints }}</span>
                       <span class="category-bonus no-bonus" *ngIf="result.bonusPoints!=0">-</span>
                </span>
      </div>
    </div>
    <div class="name-column">
      <div class="task-container header">
        <div class="task-result">
          <span class="title">Kurs-Status</span>
          <h2 class="title">Namen</h2>
        </div>
      </div>
      <div class="name-container" *ngFor="let result of courseResults | async">
        <span class="state passed" *ngIf="result.passed"><mat-icon>check_circle</mat-icon></span>
        <span class="state failed" *ngIf="!result.passed"><mat-icon>add_circle</mat-icon></span>
        <span class="username">{{result.user.surname}}, {{result.user.prename}}</span>
      </div>
    </div>

    <div class="task-column" *ngFor="let requirement of requirements | async; let i = item">
      <div class="task-container header">
        <div class="task-result">
          <span class="title title-hoverable" (click)="toggleDetails(requirement.id)">Kategorie {{ requirement.id }} &#9660; <!--&dArr; --></span>
          <span class="title">Bonus</span>
          <ng-container *ngIf="showDetails">
            <span class="title" *ngFor="let reqRes of evaluationUserResults | async"><!--{{ reqRes.results }}--></span>
          </ng-container>
        </div>
        <ng-container *ngIf="showDetails">
              <span class="category-tasks" *ngFor="let task of requirement.tasks">
                <span class="title">{{task.name}}</span>
              </span>
        </ng-container>
      </div>
      <div class="task-container" *ngFor="let result of evaluationUserResults | async">
          <span class="state passed" *ngIf="result.passed"><mat-icon>check_circle</mat-icon></span>
          <span class="state failed" *ngIf="!result.passed"><mat-icon>add_circle</mat-icon></span>
          <span class="category-result-backpane" matTooltipPosition="above"
                matTooltip="{{result.user.surname}}, {{result.user.prename}}, {{result.bonusPoints}}">
                       <span class="category-bonus bonus" *ngIf="result.bonusPoints==0">{{ result.bonusPoints }}</span>
                       <span class="category-bonus no-bonus" *ngIf="result.bonusPoints!=0">-</span>
                </span>
        <ng-container class="ngContainer" *ngIf="opened === requirement.id">
          <ng-container *ngFor="let container of result.results">
            {{ container.container.id }}
          </ng-container>
        </ng-container>

          <!--<ng-container class="ngContainer" *ngIf="opened === requirement.id">
            <ng-container *ngFor="let userResults of evaluationUserResults | async">
                   <span class="task-container" *ngFor="let containerResult of userResults.containerResults">
                       {{ containerResult }}
                     &lt;!&ndash; <span class="task-result-backpane {{(task.attempts == 0) ? 'not-tried' : (taskResult.passed) ? '' : 'failed-task'}}"
                            matTooltipPosition="above" matTooltip="{{result.user.surname}}, {{result.user.prename}} {{taskResult.task.name}}">
                        <span *ngIf="taskResult.attempts!=0" (click)="showResult(result.user.id, this.courseId, taskResult.task.id)">{{taskResult.attempts}}</span>
                        <span *ngIf="taskResult.attempts==0">-</span>
                      </span>&ndash;&gt;
                     <span class="task-result-backpane">{{ userResults }}</span>
                   </span>
            </ng-container>
          </ng-container>-->
        </div>
        <!--<mat-accordion class="accordion acc-headers-align">
         <mat-expansion-panel class="expansion-panel">
           <mat-expansion-panel-header class="expansion-panel-header">
             <mat-panel-title></mat-panel-title>
             <mat-panel-description>
               Details
             </mat-panel-description>
           </mat-expansion-panel-header>
           <div class="panel-content">
             <div class="task-column">
               <div class="task-container header">
               <span class="task-result" *ngFor="let task of requirement.tasks">
                 <span class="title">{{task.name}}</span>
               </span>
               </div>
               <div class="task-container" *ngFor="let result of courseResults | async">
               <span class="task-result" *ngFor="let taskResult of result.results">
                 <span class="task-result-backpane {{(taskResult.attempts == 0) ? 'not-tried' : (taskResult.passed) ? '' : 'failed-task'}}"
                       matTooltipPosition="above" matTooltip="{{result.user.surname}}, {{result.user.prename}} {{taskResult.task.name}}">
                   <span *ngIf="taskResult.attempts!=0" (click)="showResult(result.user.id, this.courseId, taskResult.task.id)">{{taskResult.attempts}}</span>
                   <span *ngIf="taskResult.attempts==0">-</span>
                 </span>
               </span>
               </div>
             </div>
           </div>
         </mat-expansion-panel>
       </mat-accordion>-->
    </div>
  </div>
</mat-card>
